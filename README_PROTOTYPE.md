# 🛡️ 육군 안전 예측 시스템 - Windows 프로그램 프로토타입

## 📋 프로젝트 개요

이 프로토타입은 **육군 종합정비창 안전 예측 시스템**을 Windows에서 독립 실행 가능한 `.exe` 프로그램으로 만드는 것을 목표로 합니다.

**현재 상태**: 🚧 프로토타입 (더미 데이터 사용)
**최종 목표**: 실제 ML/DL 모델과 통합된 완전한 Windows 프로그램

---

## 🎯 프로토타입 기능

### ✅ 구현된 기능
- **GUI 인터페이스**: Tkinter 기반 사용자 친화적 UI
- **사용자 입력**: 이름, 성별, 나이, 근속연수, 임무 선택
- **예측 모드**: ML 모델, DL 모델, 통합 모드 선택
- **실시간 예측**: 백그라운드 스레드로 논블로킹 처리
- **결과 표시**: 위험지수, 키워드, 안전대책 표시
- **엑셀 저장**: 4개 시트(예측결과, 위험키워드, 안전대책, 시스템정보)
- **설정 화면**: 모델 경로, GPU 설정
- **도움말**: 사용법 및 시스템 정보

### 🔄 더미 구현 (실제 통합 예정)
- ML/DL 모델 로딩 시뮬레이션
- 랜덤 위험지수 생성 (5.0~9.0)
- 임무별 맞춤 위험 키워드
- 개인화된 안전대책 추천

---

## 🚀 빠른 시작

### 1단계: 프로토타입 실행 테스트

#### Windows에서 직접 실행
```bash
# 1. 파일 다운로드
git clone <이 저장소>
cd webapp

# 2. 패키지 설치
pip install -r requirements.txt

# 3. 프로그램 실행
python main.py
```

#### .exe 파일 생성 테스트
```bash
# 자동 빌드 (권장)
python build_exe.py

# 또는 배치 파일 사용
build.bat  # Windows
./build.sh # Linux/Mac
```

### 2단계: 프로토타입 테스트
1. 프로그램 실행 후 사용자 정보 입력
2. "🔮 안전 예측 실행" 버튼 클릭
3. 결과 확인 (위험지수, 키워드, 안전대책)
4. "💾 엑셀로 저장" 테스트

---

## 📂 파일 구조

```
webapp/
├── main.py                 # 🎯 메인 프로그램
├── build_exe.py           # 🔨 PyInstaller 빌드 스크립트
├── requirements.txt       # 📦 의존성 패키지
├── build.bat             # 🖥️ Windows 자동 빌드
├── build.sh              # 🐧 Linux/Mac 자동 빌드
├── README_PROTOTYPE.md   # 📖 이 문서
│
├── models/               # 📁 모델 폴더 (실제 통합 시 생성)
│   ├── enhanced_safety_model.pkl
│   ├── enhanced_encoders.pkl
│   ├── enhanced_scaler.pkl
│   ├── neural_safety_model.pth
│   └── neural_vocab.pkl
│
└── dist/                 # 📁 빌드 결과 (자동 생성)
    └── SafetyPredictionSystem.exe
```

---

## 🔧 실제 모델 통합 가이드

### ML 모델 통합 영역
```python
def load_models(self):
    """실제 모델 로딩으로 교체 필요"""
    try:
        # 현재: 더미 구현
        time.sleep(1)
        self.models_loaded = True
        
        # TODO: 실제 구현
        # import joblib
        # self.ml_model = joblib.load('models/enhanced_safety_model.pkl')
        # self.encoders = joblib.load('models/enhanced_encoders.pkl') 
        # self.scaler = joblib.load('models/enhanced_scaler.pkl')
        
    except Exception as e:
        # 오류 처리
```

### DL 모델 통합 영역
```python
def perform_prediction(self):
    """실제 예측으로 교체 필요"""
    try:
        # 현재: 더미 구현
        ml_risk = np.random.uniform(5.0, 8.5)
        
        # TODO: 실제 구현
        # import torch
        # self.dl_model = torch.load('models/neural_safety_model.pth')
        # with torch.no_grad():
        #     prediction = self.dl_model(input_tensor)
        
    except Exception as e:
        # 오류 처리
```

---

## 🎨 GUI 스크린샷 및 기능

### 메인 화면 구성
```
┌─────────────────────────────────────────────────────────────┐
│ 🛡️ 육군 종합정비창 안전 예측 시스템 v1.0                    │
├─────────────────┬───────────────────────────────────────────┤
│ 📝 사용자 정보   │ 📊 예측 결과                              │
│ ┌─────────────┐ │ ┌─────────────────────────────────────────┐ │
│ │이름: 정수호  │ │ │현재 위험지수: 7.2 / 10.0 (주황색)       │ │
│ │성별: 남성   │ │ └─────────────────────────────────────────┘ │
│ │나이: 30     │ │ 🔑 위험 키워드 (상위 10개)                │
│ │근속: 5년    │ │ ┌─────────────────────────────────────────┐ │
│ └─────────────┘ │ │ 1. 적층 작업 위험                       │ │
│ 임무: 복합적층장갑│ │ 2. 접착제 화학 노출                     │ │
│ 모드: ML+DL 통합│ │ 3. 고온 경화 과정                       │ │
│ ☑ GPU 가속     │ │ ...                                     │ │
│ 기간: 1일      │ │ └─────────────────────────────────────────┘ │
├─────────────────┤ │ 💡 AI 안전대책 추천                      │
│                 │ │ ┌─────────────────────────────────────────┐ │
│                 │ │ │🛡️ 정수호님을 위한 맞춤 안전대책:        │ │
│                 │ │ │1. 개인보호구 완전 착용                   │ │
│                 │ │ │2. 작업 환경 점검...                     │ │
│                 │ │ └─────────────────────────────────────────┘ │
└─────────────────┴───────────────────────────────────────────┤
│ 🔮 안전 예측 실행 | 💾 엑셀로 저장 | ⚙️ 설정 | ❓ 도움말    │
├─────────────────────────────────────────────────────────────┤
│ 상태: 예측 완료 - 위험지수: 7.2                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 📊 엑셀 출력 형식

### 생성되는 4개 시트
1. **예측결과 시트**
   - 사용자 기본정보
   - 위험지수 및 예측시간

2. **위험키워드 시트** 
   - 순위별 위험 키워드 목록
   - 임무별 맞춤 키워드

3. **안전대책 시트**
   - 개인화된 안전대책 
   - 단계별 실행 방법

4. **시스템정보 시트**
   - 프로그램 버전
   - 예측 모드 및 설정정보

---

## 🔧 PyInstaller 빌드 옵션

### 간단 빌드 (권장)
```bash
pyinstaller --onefile --windowed \
  --name=SafetyPredictionSystem \
  --add-data=models;models \
  main.py
```

### 고급 빌드 (커스텀)
```bash
# spec 파일 생성 후
python build_exe.py
# 또는
pyinstaller SafetyPrediction.spec
```

### 빌드 결과물
- **파일**: `dist/SafetyPredictionSystem.exe`
- **크기**: 약 50-100MB (PyTorch 포함 시 더 클 수 있음)
- **실행**: Python 설치 없이 독립 실행 가능

---

## ⚠️ 알려진 제한사항

### 현재 프로토타입
- ❌ **더미 데이터 사용**: 실제 ML/DL 모델 연결 필요
- ❌ **GPU 지원 미완성**: CUDA 감지 및 활용 로직 필요
- ❌ **모델 파일 없음**: 실제 `.pkl`, `.pth` 파일 준비 필요

### PyInstaller 관련
- ⚠️ **큰 파일 크기**: PyTorch 포함 시 200MB+ 가능
- ⚠️ **초기 실행 지연**: 압축 해제로 인한 약간의 지연
- ⚠️ **경로 이슈**: 모델 파일 경로를 상대 경로로 수정 필요

---

## 🎯 다음 개발 단계

### 즉시 작업 (우선순위 높음)
1. **실제 ML 모델 통합**
   ```python
   # models/ 폴더에 실제 파일 배치
   enhanced_safety_model.pkl
   enhanced_encoders.pkl  
   enhanced_scaler.pkl
   ```

2. **실제 DL 모델 통합**
   ```python
   # PyTorch 모델 로딩
   neural_safety_model.pth
   neural_vocab.pkl
   ```

3. **GPU 지원 완성**
   ```python
   # CUDA 감지 및 자동 전환
   device = torch.device('cuda' if torch.cuda.is_available() else 'cpu')
   ```

### 중기 개발 (기능 개선)
1. **성능 최적화**
   - 모델 로딩 시간 단축
   - 메모리 사용량 최적화
   - 배치 처리 개선

2. **UI/UX 개선**
   - 진행률 표시바
   - 실시간 로그 표시
   - 결과 그래프 시각화

3. **안정성 강화**
   - 예외 처리 완성
   - 입력값 검증 강화
   - 자동 백업 기능

### 장기 비전 (확장)
1. **웹 버전 개발**: Flask/FastAPI 기반
2. **클라우드 배포**: Azure/AWS 연계
3. **모바일 지원**: 태블릿용 앱
4. **실시간 모니터링**: 대시보드 시스템

---

## 📞 개발 지원 및 피드백

### GitHub 활용
- **Issues**: 버그 리포트 및 기능 요청
- **Pull Requests**: 코드 기여 및 개선사항
- **Wiki**: 상세 문서화 및 튜토리얼

### 테스트 및 피드백
현재 프로토타입을 실행해보시고 다음 사항들에 대한 피드백을 주세요:

1. **UI/UX**: 사용하기 편한지, 개선점은?
2. **기능**: 필요한 추가 기능이나 변경사항은?
3. **성능**: 실행 속도나 안정성 이슈는?
4. **빌드**: .exe 생성 및 배포 관련 문제는?

---

## 📜 라이선스 및 보안

### 보안 고려사항
- 🔐 **개인정보 보호**: 로컬 실행으로 데이터 보안
- 🛡️ **모델 보안**: 실행 파일 내 모델 가중치 보호
- 📋 **접근 로그**: 사용 기록 및 감사 추적 (옵션)

### 사용 권한
- ✅ 육군 종합정비창 내부 사용 목적
- ⚠️ 외부 배포 시 승인 필요
- 📞 상업적 이용 시 별도 문의

---

**문서 작성**: 2025-10-07  
**프로토타입 버전**: v1.0  
**다음 업데이트**: 실제 모델 통합 완료 시